[{"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Signup/Signup.js":"1","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/MyLibrary/MyBook-card.js":"2","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Books-list/Book-card.js":"3","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Comment-form/Comment-form.js":"4","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Book-details/Book-details.js":"5","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/service/transation.service.js":"6","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Profile/Profile.js":"7","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/BackgroundVideo/BackgroundVideo.js":"8","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/service/books.service.js":"9","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Login/Login.js":"10","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/service/users.service.js":"11","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/shared/Popup/Popup.js":"12","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/shared/Alert/Alert.js":"13","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/layout/Footer/Footer.js":"14","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Home/Home.js":"15","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/service/comments.service.js":"16","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Book-edit/Book-edit.js":"17","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Book-form/Book-form.js":"18","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Books-list/Books-list.js":"19","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/MyLibrary/MyLibrary.js":"20"},{"size":3061,"mtime":1608161642675,"results":"21","hashOfConfig":"22"},{"size":2446,"mtime":1608161642672,"results":"23","hashOfConfig":"22"},{"size":743,"mtime":1608161642670,"results":"24","hashOfConfig":"22"},{"size":1910,"mtime":1608160717558,"results":"25","hashOfConfig":"22"},{"size":10066,"mtime":1608200326518,"results":"26","hashOfConfig":"22"},{"size":757,"mtime":1608161642677,"results":"27","hashOfConfig":"22"},{"size":9319,"mtime":1608207206151,"results":"28","hashOfConfig":"22"},{"size":469,"mtime":1608160516756,"results":"29","hashOfConfig":"22"},{"size":873,"mtime":1608161642676,"results":"30","hashOfConfig":"22"},{"size":2469,"mtime":1608161642672,"results":"31","hashOfConfig":"22"},{"size":456,"mtime":1608161642677,"results":"32","hashOfConfig":"22"},{"size":447,"mtime":1608157230991,"results":"33","hashOfConfig":"22"},{"size":653,"mtime":1608157258076,"results":"34","hashOfConfig":"22"},{"size":577,"mtime":1608157303323,"results":"35","hashOfConfig":"22"},{"size":3237,"mtime":1608207975702,"results":"36","hashOfConfig":"22"},{"size":575,"mtime":1608158811085,"results":"37","hashOfConfig":"22"},{"size":6205,"mtime":1608160605242,"results":"38","hashOfConfig":"22"},{"size":5341,"mtime":1608160632987,"results":"39","hashOfConfig":"22"},{"size":2391,"mtime":1608160678414,"results":"40","hashOfConfig":"22"},{"size":1804,"mtime":1608196879759,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"mc2bfa",{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53","usedDeprecatedRules":"54"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"65"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"84","messages":"85","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86"},"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Signup/Signup.js",[],["87","88"],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/MyLibrary/MyBook-card.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Books-list/Book-card.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Comment-form/Comment-form.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Book-details/Book-details.js",["89"],"import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\n\n// Services\nimport BooksService from '../../../service/books.service'\nimport CommentsService from '../../../service/comments.service'\nimport TransationsService from '../../../service/transation.service'\n\n// Components\nimport Alert from './../../shared/Alert/Alert'\nimport Popup from './../../shared/Popup/Popup'\nimport CommentForm from './../Comment-form/Comment-form'\n\nimport oneStar from './oneStar.png'\nimport twoStars from './twoStars.png'\nimport threeStars from './threeStars.png'\nimport fourStars from './fourStars.png'\nimport fiveStars from './fiveStars.png'\nimport starsGrey from './starsGrey.png'\n\n// Styles\nimport { Container, Row, Col, Button } from 'react-bootstrap'\nimport './Book-details.css'\n\n\n\nclass BookDetails extends Component {\n\n    constructor(props) {\n\n        super(props)\n    \n        this.state = {\n            book: undefined,\n            showModalComments: false,\n            comments: undefined,\n            transations: {\n                book_buyer: [],\n                book_owner: undefined,\n                buyer: undefined,\n                owner: undefined,\n                buy: false\n            },\n            showToast: false,\n            toastText: ''\n        }\n        this.booksService = new BooksService()\n        this.commentsService = new CommentsService()\n        this.transationsService = new TransationsService()\n    }\n       \n\n    componentDidMount = () => {\n\n        const book_id = this.props.match.params.book_id\n\n        this.booksService\n            .getBook(book_id)\n            .then(res => {\n                this.setState({ book: res.data })\n                this.props.loggedUser && this.booksBuyer()\n            })\n            .catch(err => this.setState({ showToast: true, toastText: err.response.data.message }))\n        \n        this.commentsBook()\n    }\n\n\n    booksBuyer = () => {\n\n    const buyer_id = this.props.loggedUser._id\n\n    this.booksService\n        .getBooksBuyer(buyer_id)\n        .then(res => this.setState({ transations: { owner: this.state.book.owner, buyer: this.props.loggedUser._id, book_buyer: res.data, book_owner: this.props.match.params.book_id } }))\n        .catch(err => this.setState({ showToast: true, toastText: err.response.data.message }))\n    }\n\n\n    commentsBook = () => {\n\n        const book_id = this.props.match.params.book_id\n        \n        this.commentsService\n            .getComments(book_id)\n            .then(res => this.setState({ comments: res.data }))\n            .catch(err => this.setState({ showToast: true, toastText: err.response.data.message }))\n    }\n        \n\n    refreshComments = () => this.commentsBook()\n\n\n    handleModalComments = visible => this.setState({ showModalComments: visible })\n\n\n    transation = () => {\n\n        this.transationsService\n            .saveTransation(this.state.transations)\n            .then(res => this.setState({ showToast: true, toastText: 'Su petición se ha enviado al dueño del libro.' }))\n            .catch(err => this.setState({ showToast: true, toastText: err.response.data.message }))\n    }\n\n\n    buy = () => {\n\n        this.transationsService\n            .saveTransation(this.state.transations)\n            .then(res => this.changeTransationBuy(res.data._id))\n            .catch(err => this.setState({ showToast: true, toastText: err.response.data.message }))\n    }\n\n\n    changeTransationBuy = (trans_id) => {\n\n        this.transationsService\n            .changeTransationBuy(trans_id)\n            .then(res => this.setState({ showToast: true, toastText: 'Su compra se ha realizado con éxito. El dueño se pondrá en contacto con usted.' }))\n            .catch(err => this.setState({ showToast: true, toastText: err.response.data.message }))\n    }\n\n\n    handleToast = (visible, text) => this.setState({ showToast: visible, toastText: text })\n\n\n    render() {\n\n        const book_id = this.props.match.params.book_id\n\n        return (\n            \n            <>\n                {this.state.book\n                    &&\n                    <>\n                        <h1 className=\"detailsTitle book-details-font\">{this.state.book.title}</h1>\n                        <p className=\"detailsAuthor book-details-font text-muted\">{this.state.book.author}</p>\n                    </>\n                }\n            \n                <Container className=\"book-details book-details-font paddingTop70\">\n\n                    {this.state.book\n                        ?\n                        <>\n\n                            <Row>\n\n                                <Col md={6} >\n\n                                    <img className=\"bookImg\" src={this.state.book.imageUrl} alt={this.state.book.title} />\n\n                                    {\n                                        this.state.book.rating === \"1\" \n                                            ?\n                                            <Row className=\"star\">\n                                                <img src={oneStar} alt=\"oneStar\" />\n                                            </Row>\n                                            \n                                            :\n\n                                        this.state.book.rating === \"2\" \n                                            ?\n                                            <Row className=\"star\">\n                                                <img src={twoStars} alt=\"twoStars\" />\n                                            </Row>\n                                            \n                                            :\n                                                \n                                        this.state.book.rating === \"3\" \n                                            ?\n                                            <Row className=\"star\">\n                                                <img src={threeStars} alt=\"threeStars\" />\n                                            </Row>\n                                            \n                                            :\n                                \n                                        this.state.book.rating === \"4\" \n                                            ?\n                                            <Row className=\"star\">\n                                                <img src={fourStars} alt=\"fourStars\" />\n                                            </Row>\n                                            \n                                            :\n                                                        \n                                        this.state.book.rating === \"5\"\n                                            ?\n                                            <Row className=\"star\">\n                                                <img src={fiveStars} alt=\"fiveStars\" />\n                                            </Row>\n                            \n                                            :\n\n                                            <Row className=\"star\">\n                                                <img src={starsGrey} alt=\"starsGrey\" />\n                                            </Row>\n                                    }\n\n                                    <h3 className=\"paddingTop70\">COMENTARIOS:</h3>\n\n                                    {this.state.comments\n                                        ?\n                                        <>\n                                            {this.state.comments.map(elm => <p key={elm._id}>{elm.description}. <small>({elm.user.name})</small></p>)}\n                                        </>\n                                        :\n                                        <p>Sin comentarios</p>\n                                        }\n\n                                </Col>\n\n                                <Col className= \"book-details-font\" md={6}>\n\n                                    <h3 className=\"book-details-font\">Descripción</h3>\n\n                                    <p className=\"text-justify\">{this.state.book.description}</p>\n\n                                    <hr />\n                                    \n                                    {this.state.book.sale === true && <p className=\"btnSeparation\">Precio: {this.state.book.price} €</p>}\n\n                                    {this.props.loggedUser && <Button className=\"btnDetails\" onClick={() => this.handleModalComments(true)} variant=\"#272643\" size=\"sm\">Crear comentario</Button>}\n\n                                    {this.state.book.exchange === true && this.props.loggedUser\n                                        &&\n                                        <Button className=\"btnDetails\" onClick={() => this.transation()} variant=\"#272643\" size=\"sm\">Intercambiar</Button>\n                                    }\n\n                                    {this.state.book.sale === true && this.props.loggedUser\n                                        &&\n                                        <Button className=\"btnDetails\" onClick={() => this.buy()} variant=\"#272643\" size=\"sm\">Comprar</Button>\n                                    }\n                                    \n                                    <Link to=\"/libros\" className=\"btn btnDetails btn-sm\">Volver</Link>\n                                    \n                                </Col>\n\n                            </Row>\n\n                        </>\n\n                        :\n\n                        <h1>Cargando...</h1>\n                    }\n\n                    <Popup show={this.state.showModalComments} handleModal= {this.handleModalComments} title=\"Crear comentario\">\n\n                      <CommentForm {...this.props} closeModal={() => this.handleModalComments(false)} updateListComments={this.refreshComments} />\n                    \n                    </Popup>\n\n                    <Alert show={this.state.showToast} handleToast={this.handleToast} toastText={this.state.toastText} />\n\n                </Container>\n            </>\n        )\n    }\n}\n\n\n\nexport default BookDetails\n",["90","91"],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/service/transation.service.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Profile/Profile.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/BackgroundVideo/BackgroundVideo.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/service/books.service.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Login/Login.js",[],["92","93"],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/service/users.service.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/shared/Popup/Popup.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/shared/Alert/Alert.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/layout/Footer/Footer.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Home/Home.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/service/comments.service.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Book-edit/Book-edit.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Book-form/Book-form.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Books-list/Books-list.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/MyLibrary/MyLibrary.js",["94"],"import React, { Component } from 'react'\n\n// Services\nimport BooksService from '../../../service/books.service'\n\n// Components\nimport MyBookCard from './MyBook-card'\nimport Alert from './../../shared/Alert/Alert'\n\n// Styles\nimport { Container, Row, Button } from 'react-bootstrap'\nimport './MyLibrary.css'\n\n\n\nclass MyLibrary extends Component {\n\n    constructor() {\n        super()\n        this.state = {\n            books: undefined,\n            showToast: false,\n            toastText: ''\n        }\n        this.booksService = new BooksService()\n    }\n\n\n    componentDidMount = () => this.refreshBooks()\n\n\n    refreshBooks = () => {\n\n        const owner_id = this.props.loggedUser._id\n\n        this.booksService\n            .getMyBooks(owner_id)\n            .then(res => this.setState({ books: res.data }))\n            .catch(err => this.setState({ showToast: true, toastText: err.response.data.message }))\n    }\n\n\n    handleToast = (visible, text) => this.setState({ showToast: visible, toastText: text })\n\n\n    render() {\n\n        return (\n            <>\n                <Container fluid className=\"myBookList paddingTop70\">\n\n                    <h2>Mis libros</h2>\n                    \n                    <Row >\n                        {\n                            this.state.books\n                                ?\n                                this.state.books.map(elm => <MyBookCard key={elm._id} {...elm} updateList={this.refreshBooks}/>)\n                                :\n                                <h3>Cargando...</h3>\n                        }\n                    </Row>\n\n                </Container>\n\n                <Alert show={this.state.showToast} handleToast={this.handleToast} toastText={this.state.toastText} />\n\n            </>\n        )\n    }\n}\n\n\n\nexport default MyLibrary\n",{"ruleId":"95","replacedBy":"96"},{"ruleId":"97","replacedBy":"98"},{"ruleId":"99","severity":1,"message":"100","line":129,"column":15,"nodeType":"101","messageId":"102","endLine":129,"endColumn":22},{"ruleId":"95","replacedBy":"103"},{"ruleId":"97","replacedBy":"104"},{"ruleId":"95","replacedBy":"105"},{"ruleId":"97","replacedBy":"106"},{"ruleId":"99","severity":1,"message":"107","line":11,"column":26,"nodeType":"101","messageId":"102","endLine":11,"endColumn":32},"no-native-reassign",["108"],"no-negated-in-lhs",["109"],"no-unused-vars","'book_id' is assigned a value but never used.","Identifier","unusedVar",["108"],["109"],["108"],["109"],"'Button' is defined but never used.","no-global-assign","no-unsafe-negation"]