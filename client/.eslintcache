[{"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Signup/Signup.js":"1","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/MyLibrary/MyBook-card.js":"2","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Books-list/Book-card.js":"3","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Comment-form/Comment-form.js":"4","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Book-details/Book-details.js":"5","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/service/transation.service.js":"6","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Profile/Profile.js":"7","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/BackgroundVideo/BackgroundVideo.js":"8","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/service/books.service.js":"9","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Login/Login.js":"10","/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/service/users.service.js":"11"},{"size":3024,"mtime":1607990365579,"results":"12","hashOfConfig":"13"},{"size":2411,"mtime":1608143039575,"results":"14","hashOfConfig":"13"},{"size":740,"mtime":1607951885213,"results":"15","hashOfConfig":"13"},{"size":1873,"mtime":1608111888818,"results":"16","hashOfConfig":"13"},{"size":12053,"mtime":1608146967072,"results":"17","hashOfConfig":"13"},{"size":605,"mtime":1608146020325,"results":"18","hashOfConfig":"13"},{"size":8187,"mtime":1608153667141,"results":"19","hashOfConfig":"13"},{"size":459,"mtime":1607941530884,"results":"20","hashOfConfig":"13"},{"size":855,"mtime":1608123599652,"results":"21","hashOfConfig":"13"},{"size":2432,"mtime":1607935866176,"results":"22","hashOfConfig":"13"},{"size":450,"mtime":1608110667700,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"mc2bfa",{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"32","messages":"33","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34","usedDeprecatedRules":"35"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Signup/Signup.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/MyLibrary/MyBook-card.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Books-list/Book-card.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Comment-form/Comment-form.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Book-details/Book-details.js",["48"],"import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport BooksService from '../../../service/books.service'\nimport CommentsService from '../../../service/comments.service'\nimport TransationsService from '../../../service/transation.service'\nimport Alert from './../../shared/Alert/Alert'\nimport Popup from './../../shared/Popup/Popup'\n\nimport CommentForm from './../Comment-form/Comment-form'\n\nimport starGold from './starGold.png'\nimport starGrey from './starGrey.png'\n\n//import Loader from './../../shared/Spinner/Loader'  // SI DA TIEMPO PONER SPINNER\n\nimport { Container, Row, Col, Button } from 'react-bootstrap'\nimport './Book-details.css'\n\n\n\nclass BookDetails extends Component {\n\n    constructor(props) {\n\n        super(props)\n    \n        this.state = {\n            book: undefined,\n            showModalComments: false,\n            comments: undefined,\n            transations: {\n                book_buyer: [],\n                book_owner: undefined,\n                buyer: undefined,\n                owner: undefined,\n                buy: false\n            },\n            showToast: false,\n            toastText: ''\n        }\n        this.booksService = new BooksService()\n        this.commentsService = new CommentsService()\n        this.transationsService = new TransationsService()\n    }\n       \n\n    componentDidMount = () => {\n\n        const book_id = this.props.match.params.book_id\n\n        this.booksService\n            .getBook(book_id)\n            .then(res => {\n                this.setState({ book: res.data })\n                this.props.loggedUser && this.booksBuyer()\n            })\n            .catch(err => this.setState({ showToast: true, toastText: err.response.data.message }))\n        \n        this.commentsBook()\n    }\n\n\n    booksBuyer = () => {\n\n    const buyer_id = this.props.loggedUser._id\n\n    this.booksService\n        .getBooksBuyer(buyer_id)\n        .then(res => this.setState({ transations: { owner: this.state.book.owner, buyer: this.props.loggedUser._id, book_buyer: res.data, book_owner: this.props.match.params.book_id } }))\n        .catch(err => this.setState({ showToast: true, toastText: err.response.data.message }))\n    }\n\n\n    commentsBook = () => {\n\n        const book_id = this.props.match.params.book_id\n        \n        this.commentsService\n            .getComments(book_id)\n            .then(res => this.setState({ comments: res.data }))\n            .catch(err => this.setState({ showToast: true, toastText: err.response.data.message }))\n    }\n        \n\n    refreshComments = () => this.commentsBook()\n\n\n    handleModalComments = visible => this.setState({ showModalComments: visible })\n\n\n    transation = () => {\n\n        this.transationsService\n            .saveTransation(this.state.transations)\n            .then(res => this.setState({ showToast: true, toastText: 'Su petición se ha enviado al dueño del libro.' }))\n            .catch(err => this.setState({ showToast: true, toastText: err.response.data.message }))\n    }\n\n\n    buy = () => {\n\n        this.transationsService\n            .saveTransation(this.state.transations)\n            .then(res => this.changeTransationBuy(res.data._id))\n            .catch(err => this.setState({ showToast: true, toastText: err.response.data.message }))\n    }\n\n\n    changeTransationBuy = (trans_id) => {\n\n        this.transationsService\n            .changeTransationBuy(trans_id)\n            .then(res => this.setState({ showToast: true, toastText: 'Su compra se ha realizado con éxito. El dueño se pondrá en contacto con usted.' }))\n            .catch(err => this.setState({ showToast: true, toastText: err.response.data.message }))\n    }\n\n\n    handleToast = (visible, text) => this.setState({ showToast: visible, toastText: text })\n\n\n    render() {\n\n        const book_id = this.props.match.params.book_id\n\n        return (\n            \n            <>\n                {this.state.book\n                    &&\n                    <>\n                        <h1 className=\"detailsTitle book-details-font\">{this.state.book.title}</h1>\n                        <p className=\"detailsAuthor book-details-font text-muted\">{this.state.book.author}</p>\n                    </>\n                }\n            \n                <Container className=\"book-details book-details-font paddingTop70\">\n\n                    {this.state.book\n                        ?\n                        <>\n\n                            <Row>\n\n                                <Col md={6} >\n\n                                    <img className=\"bookImg\" src={this.state.book.imageUrl} alt={this.state.book.title} />\n\n                                    {\n                                        this.state.book.rating === \"1\" \n                                            ?\n                                            <Row className=\"star\">\n                                                <img src={starGold} alt=\"firstStar\" />\n                                                <img src={starGrey} alt=\"secondStar\" />\n                                                <img src={starGrey} alt=\"thirdStar\" />\n                                                <img src={starGrey} alt=\"fourthStar\" />\n                                                <img src={starGrey} alt=\"fifthStar\" />\n                                            </Row>\n                                            \n                                            :\n\n                                        this.state.book.rating === \"2\" \n                                            ?\n                                            <Row className=\"star\">\n                                                <img src={starGold} alt=\"firstStar\" />\n                                                <img src={starGold} alt=\"secondStar\" />\n                                                <img src={starGrey} alt=\"thirdStar\" />\n                                                <img src={starGrey} alt=\"fourthStar\" />\n                                                <img src={starGrey} alt=\"fifthStar\" />\n                                            </Row>\n                                            \n                                            :\n                                                \n                                        this.state.book.rating === \"3\" \n                                            ?\n                                            <Row className=\"star\">\n                                                <img src={starGold} alt=\"firstStar\" />\n                                                <img src={starGold} alt=\"secondStar\" />\n                                                <img src={starGold} alt=\"thirdStar\" />\n                                                <img src={starGrey} alt=\"fourthStar\" />\n                                                <img src={starGrey} alt=\"fifthStar\" />\n                                            </Row>\n                                            \n                                            :\n                                \n                                        this.state.book.rating === \"4\" \n                                            ?\n                                            <Row className=\"star\">\n                                                <img src={starGold} alt=\"firstStar\" />\n                                                <img src={starGold} alt=\"secondStar\" />\n                                                <img src={starGold} alt=\"thirdStar\" />\n                                                <img src={starGold} alt=\"fourthStar\" />\n                                                <img src={starGrey} alt=\"fifthStar\" />\n                                            </Row>\n                                            \n                                            :\n                                                        \n                                        this.state.book.rating === \"5\"\n                                            ?\n                                            <Row className=\"star\">\n                                                <img src={starGold} alt=\"firstStar\" />\n                                                <img src={starGold} alt=\"secondStar\" />\n                                                <img src={starGold} alt=\"thirdStar\" />\n                                                <img src={starGold} alt=\"fourthStar\" />\n                                                <img src={starGold} alt=\"fifthStar\" />\n                                            </Row>\n                            \n                                            :\n\n                                            <Row className=\"star\">\n                                                <img src={starGrey} alt=\"firstStar\" />\n                                                <img src={starGrey} alt=\"secondStar\" />\n                                                <img src={starGrey} alt=\"thirdStar\" />\n                                                <img src={starGrey} alt=\"fourthStar\" />\n                                                <img src={starGrey} alt=\"fifthStar\" />\n                                            </Row>\n                                    }\n\n                                    <h3 className=\"paddingTop70\">COMENTARIOS:</h3>\n\n                                    {this.state.comments\n                                        ?\n                                        <>\n                                            {this.state.comments.map(elm => <p key={elm._id}>{elm.description}. <small>({elm.user.name})</small></p>)}\n                                        </>\n                                        :\n                                        <p>Sin comentarios</p>\n                                        }\n\n                                </Col>\n\n                                <Col className= \"book-details-font\" md={6}>\n\n                                    <h3 className=\"book-details-font\">Descripción</h3>\n\n                                    <p className=\"text-justify\">{this.state.book.description}</p>\n\n                                    <hr />\n                                    \n                                    {this.state.book.sale === true && <p className=\"btnSeparation\">Precio: {this.state.book.price} €</p>}\n\n                                    {this.props.loggedUser && <Button className=\"btnDetails\" onClick={() => this.handleModalComments(true)} variant=\"#272643\" size=\"sm\">Crear comentario</Button>}\n\n                                    {this.state.book.exchange === true && this.props.loggedUser\n                                        &&\n                                        <Button className=\"btnDetails\" onClick={() => this.transation()} variant=\"#272643\" size=\"sm\">Intercambiar</Button>\n                                    }\n\n                                    {this.state.book.sale === true && this.props.loggedUser\n                                        &&\n                                        <Button className=\"btnDetails\" onClick={() => this.buy()} variant=\"#272643\" size=\"sm\">Comprar</Button>\n                                    }\n                                    \n                                    <Link to=\"/libros\" className=\"btn btnDetails btn-sm\">Volver</Link>\n                                    \n                                </Col>\n\n                            </Row>\n\n                        </>\n\n                        :\n\n                        <h1>Cargando...</h1>\n                    }\n\n                    <Popup show={this.state.showModalComments} handleModal= {this.handleModalComments} title=\"Crear comentario\">\n\n                      <CommentForm {...this.props} closeModal={() => this.handleModalComments(false)} updateListComments={this.refreshComments} />\n                    \n                    </Popup>\n\n                    <Alert show={this.state.showToast} handleToast={this.handleToast} toastText={this.state.toastText} />\n\n                </Container>\n            </>\n        )\n    }\n}\n\n\n\nexport default BookDetails\n",["49","50"],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/service/transation.service.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Profile/Profile.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/BackgroundVideo/BackgroundVideo.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/service/books.service.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/components/pages/Login/Login.js",[],"/Users/carlosmartinsalaslarena/Downloads/Ironhack/Proyecto3-TLibro/client/src/service/users.service.js",[],{"ruleId":"51","severity":1,"message":"52","line":124,"column":15,"nodeType":"53","messageId":"54","endLine":124,"endColumn":22},{"ruleId":"55","replacedBy":"56"},{"ruleId":"57","replacedBy":"58"},"no-unused-vars","'book_id' is assigned a value but never used.","Identifier","unusedVar","no-native-reassign",["59"],"no-negated-in-lhs",["60"],"no-global-assign","no-unsafe-negation"]